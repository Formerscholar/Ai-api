(self["webpackChunkstraight"]=self["webpackChunkstraight"]||[]).push([[201],{9826:function(e,t,n){"use strict";var r=n(2109),a=n(2092).find,o=n(1223),c=n(9207),s="find",i=!0,l=c(s);s in[]&&Array(1)[s]((function(){i=!1})),r({target:"Array",proto:!0,forced:i||!l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),o(s)},1249:function(e,t,n){"use strict";var r=n(2109),a=n(2092).map,o=n(1194),c=n(9207),s=o("map"),i=c("map");r({target:"Array",proto:!0,forced:!s||!i},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},8309:function(e,t,n){var r=n(9781),a=n(3070).f,o=Function.prototype,c=o.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in o)&&a(o,i,{configurable:!0,get:function(){try{return c.call(this).match(s)[1]}catch(e){return""}}})},3140:function(e,t,n){"use strict";n.d(t,{Si:function(){return a},$z:function(){return o},Pl:function(){return c},Bn:function(){return s},k4:function(){return i},Es:function(){return l},C5:function(){return u}});var r=n(1984);n(129);function a(e){return(0,r.W)({url:"/ins/question/index",params:e})}function o(e){return(0,r.W)({url:"/ins/basket/add",params:e})}function c(e){return(0,r.W)({url:"/ins/basket/deleteById",params:e})}function s(e){return(0,r.W)({url:"/ins/basket/detail",params:e})}function i(e){return(0,r.W)({url:"/ins/basket/deleteAll",params:e})}function l(e){return(0,r.W)({url:"/ins/question/getAnswer",params:e})}function u(e){return(0,r.W)({url:"/ins/question/getInfo",params:e})}},4182:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return h}});n(2222),n(9826),n(1249),n(8309);var r=n(8191),a=(n(5666),n(7171)),o=n(1984),c=n(129),s=n.n(c);function i(e){return(0,o.W)({url:"/ins/basket/index",params:e})}function l(e){return(0,o.W)({url:"/ins/basket/setScore",params:e})}function u(e){return(0,o.W)({url:"/ins/basket/sort",params:e})}function d(e){return(0,o.W)({url:"/ins/basket/deleteById",params:e})}function p(e){return(0,o.W)({url:"/ins/basket/deleteByType",params:e})}function N(e){return(0,o.W)({method:"POST",url:"/ins/paper/add",data:s().stringify(e)})}function m(e){return(0,o.W)({method:"POST",url:"/ins/paper/save",data:s().stringify(e)})}var f=n(3140),V=n(4736),v=n(2119),x=n(6564),b=(0,r.defineComponent)({setup:function(e,t){var n=(0,v.tv)(),o=(0,v.yj)(),c=(0,x.oR)(),s=(0,r.reactive)({checkList:[],basketList:{},scoreId:"",isScoreBox:!1,score_num:0,title:(0,V.ar)((new Date).getTime(),!0,1)+c.state.userInfo.subject_name+"试卷",name:"试卷副标题",paper_info:"考试范围：xxx；考试时间：100分钟；命题人：xxx",becareful:"学校:___________姓名：___________班级：___________考号：___________",routeId:"",slottype:"",slotname:"",isSlot:!1,slot:"1"});(0,r.onBeforeMount)((function(){s.routeId=o.params.id,b()}));var b=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i({id:s.routeId});case 2:t=e.sent,n=t.code,r=t.data,0==n&&(r.question.map((function(e){e.question_list.map((function(e){e["isanswer"]=!1}))})),s.basketList=r,console.log(s.basketList),r.paper_config&&(s.title=r.paper_config.title,s.becareful=r.paper_config.becareful,s.paper_info=r.paper_config.paper_info,s.name=r.paper_config.subtitle,r.paper_config.is_becareful&&s.checkList.push("7"),r.paper_config.is_lock&&s.checkList.push("1"),r.paper_config.is_paper_info&&s.checkList.push("4"),r.paper_config.is_question_score&&s.checkList.push("9"),r.paper_config.is_student_info&&s.checkList.push("6"),r.paper_config.is_total_score&&s.checkList.push("3"),r.paper_config.is_subtitle&&s.checkList.push("2")));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(e){var t=_.find(s.checkList,(function(t){return t==e}));return 1==t?(0,r.createVNode)("img",{className:"peal_line",src:"https://aictb.oss-cn-shanghai.aliyuncs.com/straight/peal_line.png",alt:"peal_line"},null):2==t?(0,r.createVNode)((0,r.resolveComponent)("el-input"),{className:"subhead",modelValue:s.name,"onUpdate:modelValue":function(e){return s.name=e},placeholder:"请输入副标题"},null):3==t?(0,r.createVNode)("table",{className:"total",border:"1",cellpadding:"0",cellspacing:"0"},[(0,r.createVNode)("tr",null,[(0,r.createVNode)("td",null,[(0,r.createTextVNode)("题号")]),(0,r.createVNode)("td",null,[(0,r.createTextVNode)("一")]),(0,r.createVNode)("td",null,[(0,r.createTextVNode)("二")]),(0,r.createVNode)("td",null,[(0,r.createTextVNode)("三")]),(0,r.createVNode)("td",null,[(0,r.createTextVNode)("总分")])]),(0,r.createVNode)("tr",null,[(0,r.createVNode)("td",null,[(0,r.createTextVNode)("得分")]),(0,r.createVNode)("td",null,null),(0,r.createVNode)("td",null,null),(0,r.createVNode)("td",null,null),(0,r.createVNode)("td",null,null)])]):4==t?(0,r.createVNode)((0,r.resolveComponent)("el-input"),{className:"tip",modelValue:s.paper_info,"onUpdate:modelValue":function(e){return s.paper_info=e},placeholder:"请输入副标题"},null):6==t?(0,r.createVNode)((0,r.resolveComponent)("el-input"),{className:"fill",modelValue:s.becareful,"onUpdate:modelValue":function(e){return s.becareful=e},placeholder:"请输入考生信息"},null):7==t?(0,r.createVNode)("div",{className:"Attention"},[(0,r.createVNode)("div",{className:"title_text"},[(0,r.createVNode)("span",{style:"color:#E50304;"},[(0,r.createTextVNode)("*")]),(0,r.createTextVNode)("注意事项：")]),(0,r.createVNode)("div",{className:"value padnum"},[(0,r.createTextVNode)("1．答题前填写好自己的姓名、班级、考号等信息")]),(0,r.createVNode)("div",{className:"value"},[(0,r.createTextVNode)("2．请将答案正确填写在答题卡上")])]):8==t?(0,r.createVNode)(r.Fragment,null,[(0,r.createVNode)("div",{className:"Volume"},[(0,r.createTextVNode)("第Ⅰ卷（选择题）")]),(0,r.createVNode)("div",{className:"annotation"},[(0,r.createTextVNode)("第I卷的注释")])]):9==t?(0,r.createVNode)("table",{border:"1",cellpadding:"0",cellspacing:"0"},[(0,r.createVNode)("tr",null,[(0,r.createVNode)("td",null,[(0,r.createTextVNode)("评卷人")]),(0,r.createVNode)("td",null,[(0,r.createTextVNode)("得分")])]),(0,r.createVNode)("tr",null,[(0,r.createVNode)("td",null,null),(0,r.createVNode)("td",null,null)])]):null},k=function(){var e,t;return null===(e=s.basketList)||void 0===e||null===(t=e.question)||void 0===t?void 0:t.map((function(e,t){return(0,r.createVNode)(r.Fragment,null,[(0,r.createVNode)("div",{className:"Topics"},[h(9),(0,r.createVNode)("span",null,[t+1,(0,r.createTextVNode)("、"),e.name,(0,r.createTextVNode)("（共"),e.count,(0,r.createTextVNode)("题；共"),e.score,(0,r.createTextVNode)("分）")])]),g(e.question_list)])}))},T=function(e){s.basketList.question.map((function(t){t.question_list.map(function(){var t=(0,a.Z)(regeneratorRuntime.mark((function t(n){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n.id!=e){t.next=12;break}if(n.isanswer=!n.isanswer,n.isanswer){t.next=4;break}return t.abrupt("return");case 4:if(!n.know_point_names){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,(0,f.Es)({id:e});case 8:r=t.sent,a=r.code,o=r.data,0==a&&(n["know_point_names"]=o.know_point_names,n["answer"]=o.answer,n["analysis"]=o.analysis);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}))},g=function(e){return e.map((function(e,t){return(0,r.createVNode)("div",{className:"questions"},[(0,r.createVNode)("span",{className:"slot"},[t+1,(0,r.createTextVNode)("."),(0,r.createVNode)("span",{className:"score"},[(0,r.createTextVNode)("("),e.score,(0,r.createTextVNode)("分)")])]),(0,r.createVNode)("span",{className:"question_body",innerHTML:e.content_all},null),y(e),(0,r.createVNode)("div",{className:"btns"},[(0,r.createVNode)("div",{className:"items look",onClick:function(){return T(e.id)}},[(0,r.createTextVNode)("查看答案")]),(0,r.createVNode)("div",{className:"items score",onClick:function(){return L(e.id,e.score)}},[(0,r.createTextVNode)("设置得分")]),(0,r.createVNode)("div",{className:"items moveup",onClick:function(){return C({type:e.type,id:e.id,sort:"up"})}},[(0,r.createTextVNode)("上移")]),(0,r.createVNode)("div",{className:"items movedown",onClick:function(){return C({type:e.type,id:e.id,sort:"down"})}},[(0,r.createTextVNode)("下移")]),(0,r.createVNode)("div",{className:"items del",onClick:function(){return w(e.id)}},[(0,r.createTextVNode)("删除")])])])}))},y=function(e){return e.isanswer&&(0,r.createVNode)("div",{className:"answer_box"},[(0,r.createVNode)("div",{className:"items"},[(0,r.createVNode)("span",{className:"key"},[(0,r.createTextVNode)("【考点】")]),(0,r.createVNode)("div",{className:"val",innerHTML:null===e||void 0===e?void 0:e.know_point_names},null)]),(0,r.createVNode)("div",{className:"items"},[(0,r.createVNode)("span",{className:"key"},[(0,r.createTextVNode)("【答案】")]),(0,r.createVNode)("div",{className:"val",innerHTML:null===e||void 0===e?void 0:e.answer},null)]),(0,r.createVNode)("div",{className:"items"},[(0,r.createVNode)("span",{className:"key"},[(0,r.createTextVNode)("【解析】")]),(0,r.createVNode)("div",{className:"val",innerHTML:null===e||void 0===e?void 0:e.analysis},null)])])},w=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,d({id:t});case 2:n=e.sent,r=n.code,0==r&&b();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:n=e.sent,r=n.code,0==r&&b();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e,t){s.scoreId=e,s.score_num=t,s.isScoreBox=!0},q=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.isScoreBox=!1,e.next=3,l({id:s.scoreId,score:s.score_num});case 3:t=e.sent,n=t.code,0==n&&b();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e,t;return null===(e=s.basketList)||void 0===e||null===(t=e.paper)||void 0===t?void 0:t.detail.map((function(e,t){return(0,r.createVNode)(r.Fragment,null,[(0,r.createVNode)("div",{className:"type_title"},[(0,r.createVNode)("div",{className:"text"},[t+1,(0,r.createTextVNode)("、"),e.name]),(0,r.createVNode)("div",{className:"btns"},[(0,r.createVNode)("span",{onClick:function(){return S(e.type,e.name)}},[(0,r.createTextVNode)("排序")]),(0,r.createVNode)("span",{onClick:function(){return W(e.type)}},[(0,r.createTextVNode)("删除")])])]),(0,r.createVNode)("div",{className:"sec_con"},[B(e.quesiton_ids)])])}))},S=function(e,t){s.slottype=e,s.slotname=t,s.isSlot=!0},I=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.isSlot=!1,e.next=3,i({type:[s.slottype],sort:s.slot});case 3:t=e.sent,n=t.code,0==n&&b();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p({type:t});case 2:n=e.sent,r=n.code,0==r&&b();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(e){return e.map((function(e,t){return(0,r.createVNode)("div",{className:"con_item",key:e},[t+1])}))},U=function(e){return void 0!=_.find(s.checkList,(function(t){return t==e}))?1:0},Z=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,r,a,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=[],null===(t=s.basketList)||void 0===t||t.question.map((function(e,t){r.push({parent_id:1,question_id:0,title:"".concat(t+1,"、").concat(e.name,"（共").concat(e.count,"题；共 ").concat(e.score,"分）"),sort:0,score:0}),e.question_list.map((function(e,t){r.push({parent_id:2,question_id:e.id,title:1,sort:e.sort,score:e.score})}))})),a=null,!s.routeId){e.next=9;break}return e.next=6,m({id:s.routeId,title:s.title,name:"",is_subtitle:U(2),subtitle:s.name,is_lock:U(1),is_total_score:U(3),is_paper_info:U(4),paper_info:s.paper_info,is_student_info:U(6),is_becareful:U(7),becareful:s.becareful,is_question_score:U(9),is_sub_section:0,sub_section:"",questions:r});case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,N({title:s.title,name:"",is_subtitle:U(2),subtitle:s.name,is_lock:U(1),is_total_score:U(3),is_paper_info:U(4),paper_info:s.paper_info,is_student_info:U(6),is_becareful:U(7),becareful:s.becareful,is_question_score:U(9),is_sub_section:0,sub_section:"",questions:r});case 11:a=e.sent;case 12:o=a,c=o.code,0==c&&n.push("/paper");case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,a.Z)(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,f.k4)();case 2:t=e.sent,r=t.code,0==r&&n.go(-1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(){var e,t,n,a,o,c;return(0,r.createVNode)("div",{id:"PreviewPaper"},[(0,r.createVNode)("div",{className:"left_body"},[h(1),(0,r.createVNode)("div",{className:"html_content"},[(0,r.createVNode)((0,r.resolveComponent)("el-input"),{className:"title",modelValue:s.title,"onUpdate:modelValue":function(e){return s.title=e},placeholder:"请输入标题"},null),h(2),h(4),h(6),h(3),h(7),h(8),k()])]),(0,r.createVNode)("div",{className:"right_btn"},[(0,r.createVNode)("div",{className:"twoBtns"},[(0,r.createVNode)("div",{className:"complete",onClick:Z},[(0,r.createTextVNode)("完成组卷")]),void 0===s.routeId&&(0,r.createVNode)("div",{className:"analyze",onClick:A},[(0,r.createTextVNode)("清空组卷")])]),(0,r.createVNode)("div",{className:"checkds"},[(0,r.createVNode)("div",{className:"title_txt"},[(0,r.createTextVNode)("试卷结构设置")]),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox-group"),{className:"checkList",modelValue:s.checkList,"onUpdate:modelValue":function(e){return s.checkList=e}},{default:function(){return[(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"1"},{default:function(){return[(0,r.createTextVNode)("密封线")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"2"},{default:function(){return[(0,r.createTextVNode)("副标题")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"3"},{default:function(){return[(0,r.createTextVNode)("总分栏")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"4"},{default:function(){return[(0,r.createTextVNode)("试卷信息")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"6"},{default:function(){return[(0,r.createTextVNode)("考生信息")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"7"},{default:function(){return[(0,r.createTextVNode)("注意事项")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-checkbox"),{label:"9"},{default:function(){return[(0,r.createTextVNode)("大题评分区")]}})]}})]),(0,r.createVNode)("div",{className:"qinfo"},[(0,r.createVNode)("div",{className:"title"},[(0,r.createTextVNode)("试卷信息")]),(0,r.createVNode)("div",{className:"hints"},[(0,r.createVNode)("div",{className:"score_span"},[(0,r.createTextVNode)("分数："),(0,r.createVNode)("span",null,[null===(e=s.basketList)||void 0===e||null===(t=e.paper)||void 0===t?void 0:t.score,(0,r.createTextVNode)("分")])]),(0,r.createVNode)("div",{className:"num_span"},[(0,r.createTextVNode)("题数："),(0,r.createVNode)("span",null,[null===(n=s.basketList)||void 0===n||null===(a=n.paper)||void 0===a?void 0:a.question_count,(0,r.createTextVNode)("题")])]),(0,r.createVNode)("div",{className:"level_span"},[(0,r.createTextVNode)("难度："),(0,r.createVNode)("span",null,[V.Q8[null===(o=s.basketList)||void 0===o||null===(c=o.paper)||void 0===c?void 0:c.level]])])]),(0,r.createVNode)("div",{className:"subsection"},[(0,r.createVNode)("div",{className:"subsection_title"},[(0,r.createVNode)("div",{className:"dashed"},null),(0,r.createVNode)("div",{className:"text"},[(0,r.createTextVNode)("第Ⅰ卷(选择题)")]),(0,r.createVNode)("div",{className:"dashed"},null)]),R()])])]),(0,r.createVNode)((0,r.resolveComponent)("el-dialog"),{title:"温馨提示",modelValue:s.isScoreBox,"onUpdate:modelValue":function(e){return s.isScoreBox=e},width:"40.625rem"},{default:function(){return[(0,r.createVNode)("div",{className:"body_box"},[(0,r.createVNode)("div",{className:"lable"},[(0,r.createTextVNode)("分数")]),(0,r.createVNode)((0,r.resolveComponent)("el-input"),{modelValue:s.score_num,"onUpdate:modelValue":function(e){return s.score_num=e},placeholder:"请输入分数",style:"width:80px;margin:0 1rem;"},null),(0,r.createVNode)("span",null,[(0,r.createTextVNode)("分")])]),(0,r.createVNode)("div",{class:"footer_box"},[(0,r.createVNode)((0,r.resolveComponent)("el-button"),{type:"primary",onClick:q},{default:function(){return[(0,r.createTextVNode)("确 定")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-button"),{onClick:function(){return s.isScoreBox=!1}},{default:function(){return[(0,r.createTextVNode)("取 消")]}})])]}}),(0,r.createVNode)((0,r.resolveComponent)("el-dialog"),{title:"温馨提示",modelValue:s.isSlot,"onUpdate:modelValue":function(e){return s.isSlot=e},width:"40.625rem"},{default:function(){return[(0,r.createVNode)("div",{className:"slotBody"},[(0,r.createVNode)("div",{className:"title"},[s.slotname]),(0,r.createVNode)("div",{className:"slot_warp"},[(0,r.createVNode)("div",{className:"key"},[(0,r.createTextVNode)("排序方式")]),(0,r.createVNode)((0,r.resolveComponent)("el-radio-group"),{modelValue:s.slot,"onUpdate:modelValue":function(e){return s.slot=e}},{default:function(){return[(0,r.createVNode)((0,r.resolveComponent)("el-radio"),{label:"1"},{default:function(){return[(0,r.createTextVNode)("难度从低到高")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-radio"),{label:"2"},{default:function(){return[(0,r.createTextVNode)("难度从高到低")]}})]}})])]),(0,r.createVNode)("div",{class:"footer_box"},[(0,r.createVNode)((0,r.resolveComponent)("el-button"),{onClick:function(){return s.isSlot=!1}},{default:function(){return[(0,r.createTextVNode)("取 消")]}}),(0,r.createVNode)((0,r.resolveComponent)("el-button"),{type:"primary",onClick:I},{default:function(){return[(0,r.createTextVNode)("确 定")]}})])]}})])}}}),h=b}}]);